<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bioskop Online — Pilih Kursi</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Basic style for the selected seats info, assume 'var(--primary)' is a defined color */
    #selected-seats-info {
      text-align: right;
      font-weight: bold;
      color: var(--primary, #007bff); /* Fallback color */
      min-height: 20px; /* To prevent layout shift when text appears */
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">BI</div>
        <div>
          <h1>Bioskop K6</h1>
          <div style="font-size:12px;color:var(--muted)">Demo</div>
        </div>
      </div>
      <nav>
        <a href="beranda.html">Beranda</a>
        <a href="detail.html">Detail Film</a>
        <a href="kursi.html" class="active">Pilih Kursi</a>
        <a href="jadwal.html">Jadwal & Lokasi</a>
        <a href="bayar.html">Pembayaran</a>
      </nav>
    </header>

    <main>
      <section>
        <form id="seat-selection-form" action="jadwal.html" method="get">
          <div style="display:flex;gap:18px;flex-direction:column">
            <div id="selected-seats-info"></div>

            <div class="seat-area card">
              <div style="text-align:center;color:var(--muted);font-size:13px">Layar</div>
              <div class="screen-label"></div>
              <div class="seat-grid">
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="1"><div class="seat">1</div></label>
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="2"><div class="seat">2</div></label>
                <div class="seat taken">3</div>
                <div class="seat taken">4</div>
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="5"><div class="seat">5</div></label>
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="6"><div class="seat">6</div></label>
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="7"><div class="seat">7</div></label>
                <label class="seat-wrapper"><input type="checkbox" name="seat" value="8"><div class="seat">8</div></label>
                <script> 
                  for(let i=9; i<=40; i++) { 
                    let isTaken = [12,13,22,23,30,31,38,39].includes(i); 
                    if(isTaken){ 
                      document.write(`<div class="seat taken">${i}</div>`); 
                    } else { 
                      document.write(`<label class="seat-wrapper"><input type="checkbox" name="seat" value="${i}"><div class="seat">${i}</div></label>`); 
                    } 
                  } 
                </script>
              </div>
              <div class="legend">
                <div class="legend-item"><div class="box" style="background:var(--accent)"></div> Dipilih</div>
                <div class="legend-item"><div class="box seat-style"></div> Kosong</div>
                <div class="legend-item"><div class="box taken-style"></div> Terisi</div>
              </div>
            </div>
            <div style="display:flex;gap:10px;justify-content:flex-end">
              <a href="detail.html" class="btn ghost">Kembali</a>
              <button type="submit" class="btn" id="continue-button">Lanjut ke Jadwal</button>
            </div>
          </div>
        </form>
      </section>
    </main>

    <footer>© 2025 • Demo - Kelompok 6</footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('seat-selection-form');
      const seatCheckboxes = form.querySelectorAll('input[type="checkbox"][name="seat"]');
      const infoDisplay = document.getElementById('selected-seats-info');
      const continueButton = document.getElementById('continue-button');

      /**
       * Updates the display with the number and list of selected seats.
       */
      function updateSelectedSeatsInfo() {
        const selectedSeats = Array.from(seatCheckboxes)
                                   .filter(checkbox => checkbox.checked)
                                   .map(checkbox => checkbox.value);
        
        // Requirement 2: Start empty, only show info after selection
        if (selectedSeats.length === 0) {
          infoDisplay.innerHTML = '';
          // Optionally disable the button to visually reinforce the requirement
          // continueButton.disabled = true;
        } else {
          const seatList = selectedSeats.join(', ');
          infoDisplay.innerHTML = `**${selectedSeats.length}** Kursi Dipilih: ${seatList}`;
          // continueButton.disabled = false;
        }
      }

      /**
       * Handles form submission to ensure at least one seat is selected.
       */
      form.addEventListener('submit', (event) => {
        const selectedSeatsCount = form.querySelectorAll('input[type="checkbox"][name="seat"]:checked').length;
        
        // Requirement 1: Prevent submission if no seats are selected
        if (selectedSeatsCount === 0) {
          event.preventDefault(); // Stop the form from submitting
          alert('Anda harus memilih minimal satu kursi untuk melanjutkan!'); // User feedback
        }
        // If count > 0, the form submits normally.
      });

      // Add event listeners to all seat checkboxes to update the display
      seatCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateSelectedSeatsInfo);
      });

      // Initial call to set the display to empty (Requirement 2)
      updateSelectedSeatsInfo();
    });
  </script>
</body>
</html>